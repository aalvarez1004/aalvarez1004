<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>F1 Circuit Simulation</title>
    <style>
        /* Add your CSS styles here for better aesthetics */
    </style>
</head>
<body>
    <h1>F1 Final Circuit Simulation</h1>

    <!-- Circuit Selection Dropdown -->
    <label for="circuitSelect">Select Circuit:</label>
    <select id="circuitSelect" onchange="changeCircuit()">
        <option value="circuit1">Circuit 1</option>
        <option value="circuit2">Circuit 2</option>
    </select><br><br>

    <!-- Customizable Race Settings for Circuit 1 -->
    <div id="customizableSettingsCircuit1">
        <label for="lapDuration1">Lap Duration (seconds):</label>
        <input type="number" id="lapDuration1" min="1" value="5"><br>

        <label for="numLaps1">Number of Laps:</label>
        <input type="number" id="numLaps1" min="1" value="10"><br>

        <label for="yellowColor1">Yellow Ball 1 Color:</label>
        <input type="color" id="yellowColor1" value="#FFFF00"><br>

        <label for="greenColor1">Green Ball 2 Color:</label>
        <input type="color" id="greenColor1" value="#008000"><br>
    </div>

    <!-- Customizable Race Settings for Circuit 2 -->
    <div id="customizableSettingsCircuit2" style="display: none;">
        <label for="lapDuration2">Lap Duration (seconds):</label>
        <input type="number" id="lapDuration2" min="1" value="5"><br>

        <label for="numLaps2">Number of Laps:</label>
        <input type="number" id="numLaps2" min="1" value="10"><br>

        <label for="yellowColor2">Yellow Ball 1 Color:</label>
        <input type="color" id="yellowColor2" value="#FFFF00"><br>

        <label for="greenColor2">Green Ball 2 Color:</label>
        <input type="color" id="greenColor2" value="#008000"><br>
    </div>

    <button id="startButton" onclick="startRace()">Start Race</button>
    <button id="stopButton" onclick="stopRace()" disabled>Stop Race</button><br><br>

    <!-- SVG elements for Circuit 1 -->
    <svg width="1500" height="600" id="svgCircuit1" style="display: block;">
        <!-- Circuit 1 Path -->
        <path id="circuit1" d="m 67.166403,136.91599 0.0344,0.75407 0.108479,0.74612 0.156104,0.71438 c 0.596193,2.159 1.643062,3.96345 3.140604,5.41337 2.405944,2.33186 5.251098,4.66549 8.535458,7.00088 5.995459,4.26508 17.223145,6.18502 20.072228,13.78526 0.08497,0.22666 -0.715311,0.0807 -0.180853,0.70332 0.168275,0.19384 -0.05092,0.4187 -0.206375,0.52387 -1.475609,0.99826 -3.56751,0.0945 -5.344583,-0.0318 -10.196439,-0.72495 -20.052238,-3.04677 -30.383336,-4.15802 -5.106458,-0.54768 -10.841393,-0.65739 -16.024581,-0.98812 -4.087812,-0.26194 -9.075208,1.06627 -11.996208,4.08517 -2.460625,2.54352 -4.599339,5.36486 -6.416146,8.46402 l -0.931333,1.45785 c -0.638527,2.3936 0.015,4.27743 1.960563,5.6515 0.423333,0.2981 0.95691,0.50888 1.600729,0.63235 5.408083,1.03717 10.941402,1.6122 16.599958,1.72509 8.662458,0.1711 16.517056,0.25841 23.563792,0.26193 l 6.228291,0.0397 41.465496,-0.003 c 0.32985,-0.0935 0.63588,-0.09 0.9181,0.0106 9.04699,-0.0265 18.0878,-0.045 27.12244,-0.0556 2.37949,-0.002 3.95817,-0.12877 4.73604,-0.381 5.26786,-1.70657 6.05102,-9.28423 5.91344,-13.84829 -0.12965,-4.43177 -3.21998,-10.82411 -6.3844,-14.23459 -2.12989,-2.29393 -4.49262,-4.54554 -7.18872,-6.12246 -3.7809,-2.20927 -8.52753,-3.49779 -12.85611,-4.90008 -2.38831,-0.77435 -4.03225,-1.40406 -4.93183,-1.88912 -5.81819,-3.13796 -8.17563,-8.7339 -9.24454,-14.92515 -0.48419,-2.78871 0.76464,-6.5114 1.84943,-9.09637 1.25589,-2.99156 2.90866,-6.88182 4.9583,-11.67077 1.6457,-3.8444 3.39725,-7.217839 6.80772,-9.466797 1.85209,-1.222375 3.61157,-1.463146 5.37369,-0.07144 1.44286,1.141236 2.65906,2.488846 3.64861,4.042837 2.38389,3.73856 4.87627,7.47448 7.17285,11.20775 15.37759,24.98725 30.33449,50.2285 45.49511,75.35069 2.99244,4.95564 6.17538,9.79222 9.1784,14.74787 0.78316,1.29646 1.17475,2.33098 0.57414,3.64067 -1.11125,2.41564 -6.48229,3.76766 -8.79475,3.99521 -6.04308,0.59266 -13.11275,0.54239 -18.40441,0.5715 -55.64365,0.3175 -111.287283,0.41804 -166.9309209,0.30162 -0.2460625,0 -0.5371041,-0.0794 -0.7593544,-0.10054 -0.4374435,-0.0388 1.1461095,-2.5231 2.1223216,-3.45989 2.0583177,-1.9752 5.4782887,-1.21248 7.4732467,-4.17052 1.870603,-2.77283 -2.472985,-8.34513 -3.690068,-11.25026 -1.400527,-3.3408 -2.497667,-6.16744 -3.291417,-8.47989 -0.9657289,-2.80459 -0.7170205,-6.30238 -0.328083,-9.26571 3.085042,-23.53204 4.978045,-42.44181 8.867418,-70.56967 1.016,-7.339542 0.01516,-12.579173 2.832456,-15.718896 0.107598,-0.689681 0.888649,-0.600071 1.176163,-0.898169 1.486959,-1.545167 4.573233,-0.02523 5.808837,1.099253 0.564443,0.513291 1.285875,1.450797 2.164291,2.812521 1.538111,2.381249 2.834569,4.143374 3.889375,5.286374 6.103057,6.605767 12.429244,12.516557 18.978563,17.732377 2.561166,2.03994 6.543146,2.90513 9.654645,3.96346 1.648355,0.56356 2.799292,1.12712 3.783542,2.6035 0.950735,1.42875 1.397,2.94481 1.338792,4.54819 -0.06703,1.80798 -0.434798,5.09323 -1.103313,9.85573 -0.04939,0.3563 -0.02029,1.03187 0.08731,2.0267 z" />
        <text x="100" y="500" font-size="20" fill="black">Australia Circuit</text>
        

        <!-- Yellow Ball 1 for Circuit 1 -->
        <circle id="bola1_1" r="5" fill="yellow">
            <animateMotion id="animateYellow1_1" dur="5s" repeatCount="indefinite" begin="animating.begin" fill="freeze">
                <mpath xlink:href="#circuit1" />
            </animateMotion>
        </circle>

        <!-- Green Ball 2 for Circuit 1 -->
        <circle id="bola1_2" r="5" fill="green">
            <animateMotion id="animateGreen1_2" dur="10s" repeatCount="indefinite" begin="animating.begin" fill="freeze">
                <mpath xlink:href="#circuit1" />
            </animateMotion>
        </circle>
    </svg>

    <!-- SVG elements for Circuit 2 -->
    <svg width="1500" height="600" id="svgCircuit2" style="display: none;">
        <!-- Circuit 2 Path -->
        <path id="circuit2" d="m 40.821427,67.27976 c -6.825421,-0.632979 -13.7324,2.596146 -19.654761,6.047621 -5.390254,3.14137 -11.6504711,6.92713 -13.6071422,12.85119 -3.6120757,10.935999 -3.4362115,27.483329 6.0476192,34.017859 4.435807,3.05635 10.489046,-2.928 15.874999,-3.02381 6.627619,-0.11789 13.040835,3.46562 19.654763,3.02381 4.45524,-0.29761 12.851188,-3.77976 12.851188,-3.77976 l 32.505954,9.82738 c 0,0 43.416913,20.31487 63.500003,33.2619 11.01504,7.1011 30.99404,24.19048 30.99404,24.19048 l 15.11905,-28.72619 -69.54762,-41.57738 -8.53689,16.53923 -13.56128,-9.11728 c 0,0 -8.02315,-5.62727 -12.23281,-4.53572 -1.7194,0.44584 -1.754078,3.57559 -3.466635,4.04703 -10.737126,2.9558 -31.658289,-10.67503 -31.658289,-10.67503 l 7.467811,-9.865376 v -4.535715 l -3.02381,-5.291667 c 0,0 2.489527,-4.696105 1.511906,-6.803572 -4.79052,-10.326967 -18.902741,-14.823776 -30.238096,-15.875 z" stroke="black" fill="transparent" stroke-width="5" />
<text x="100" y="500" font-size="20" fill="black">Azerbaijan Circuit</text>

        <!-- Yellow Ball 1 for Circuit 2 -->
        <circle id="bola2_1" r="5" fill="yellow">
            <animateMotion id="animateYellow2_1" dur="5s" repeatCount="indefinite" begin="animating.begin" fill="freeze">
                <mpath xlink:href="#circuit2" />
            </animateMotion>
        </circle>
        <!-- Green Ball 2 for Circuit 2 -->
        <circle id="bola2_2" r="5" fill="green">
            <animateMotion id="animateGreen2_2" dur="10s" repeatCount="indefinite" begin="animating.begin" fill="freeze">
                <mpath xlink:href="#circuit2" />
            </animateMotion>
        </circle>
    </svg>

    <br><br>
    <div id="lapCounter"></div>
    <div id="lapTime"></div>

    <script>
        var lapCounter1 = 0;
        var lapCounter2 = 0;
        var lapTime = 0;
        var lapInterval;
   
        // Initial visibility based on the selected circuit
        var selectedCircuit = document.getElementById("circuitSelect").value;
        if (selectedCircuit === "circuit1") {
            document.getElementById("svgCircuit1").style.display = "block";
            document.getElementById("svgCircuit2").style.display = "none";
        } else if (selectedCircuit === "circuit2") {
            document.getElementById("svgCircuit1").style.display = "none";
            document.getElementById("svgCircuit2").style.display = "block";
        }

        // Show/hide circuits based on the selected circuit
        function changeCircuit() {
            var selectedCircuit = document.getElementById("circuitSelect").value;

            if (selectedCircuit === "circuit1") {
                document.getElementById("svgCircuit1").style.display = "block";
                document.getElementById("svgCircuit2").style.display = "none";
            } else if (selectedCircuit === "circuit2") {
                document.getElementById("svgCircuit1").style.display = "none";
                document.getElementById("svgCircuit2").style.display = "block";
            }
        }
        
function startRace() {
            // Read selected circuit
            var selectedCircuit = document.getElementById("circuitSelect").value;

            // Read customizable settings for the selected circuit
            var lapDuration, numLaps, yellowColor, greenColor;
            if (selectedCircuit === "circuit1") {
                lapDuration = parseInt(document.getElementById("lapDuration1").value, 10);
                numLaps = parseInt(document.getElementById("numLaps1").value, 10);
                yellowColor = document.getElementById("yellowColor1").value;
                greenColor = document.getElementById("greenColor1").value;
            } else if (selectedCircuit === "circuit2") {
                lapDuration = parseInt(document.getElementById("lapDuration2").value, 10);
                numLaps = parseInt(document.getElementById("numLaps2").value, 10);
                yellowColor = document.getElementById("yellowColor2").value;
                greenColor = document.getElementById("greenColor2").value;
            }

            // Set animation durations based on selected circuit
            var yellowBallDuration = selectedCircuit === "circuit1" ? lapDuration : lapDuration * 2;
            var greenBallDuration = selectedCircuit === "circuit1" ? lapDuration * 2 : lapDuration;
            document.getElementById("animateYellow1_1").setAttribute("dur", yellowBallDuration + "s");
            document.getElementById("animateGreen1_2").setAttribute("dur", greenBallDuration + "s");
            document.getElementById("animateYellow2_1").setAttribute("dur", yellowBallDuration + "s");
            document.getElementById("animateGreen2_2").setAttribute("dur", greenBallDuration + "s");

            // Update lap counters
            lapCounter1 = 0;
            lapCounter2 = 0;
            lapTime = 0;
            document.getElementById("lapCounter").innerHTML = "Number of laps - Circuit 1: " + lapCounter1 + ", Circuit 2: " + lapCounter2;
            document.getElementById("lapTime").innerHTML = "Lap time: " + formatTime(lapTime);
            document.getElementById("startButton").disabled = true;
            document.getElementById("stopButton").disabled = false;

            // Apply ball colors
            document.getElementById("bola1_1").setAttribute("fill", yellowColor);
            document.getElementById("bola1_2").setAttribute("fill", greenColor);
            document.getElementById("bola2_1").setAttribute("fill", yellowColor);
            document.getElementById("bola2_2").setAttribute("fill", greenColor);

            // Show/hide selected circuit's SVG
            if (selectedCircuit === "circuit1") {
                document.getElementById("svgCircuit1").style.display = "block";
                document.getElementById("svgCircuit2").style.display = "none";
            } else if (selectedCircuit === "circuit2") {
                document.getElementById("svgCircuit1").style.display = "none";
                document.getElementById("svgCircuit2").style.display = "block";
            }

            // Start animations
            document.getElementById("animateYellow1_1").beginElement();
            document.getElementById("animateGreen1_2").beginElement();
            document.getElementById("animateYellow2_1").beginElement();
            document.getElementById("animateGreen2_2").beginElement();

            lapInterval = setInterval(function () {
                lapTime++;
                document.getElementById("lapTime").innerHTML = "Lap time: " + formatTime(lapTime);

                // Check if the balls have completed laps
                if (lapTime % lapDuration === 0) {
                    lapCounter1++;
                }
                if (lapTime % (lapDuration * 2) === 0) {
                    lapCounter2++;
                }

                document.getElementById("lapCounter").innerHTML = "Number of laps - Circuit 1: " + lapCounter1 + ", Circuit 2: " + lapCounter2;

                // Check if the race is complete
                if (lapCounter1 >= numLaps || lapCounter2 >= numLaps) {
                    stopRace();
                }
            }, 1000);
        }

        function stopRace() {
            clearInterval(lapInterval);
            document.getElementById("startButton").disabled = false;
            document.getElementById("stopButton").disabled = true;

            // Stop animations
            document.getElementById("animateYellow1_1").endElement();
            document.getElementById("animateGreen1_2").endElement();
            document.getElementById("animateYellow2_1").endElement();
            document.getElementById("animateGreen2_2").endElement();
        }

        function formatTime(time) {
            var minutes = Math.floor(time / 60);
            var seconds = time % 60;
            return minutes + "m " + seconds + "s";
        }

    </script>
    
</body>
</html>
